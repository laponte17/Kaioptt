import React, { useState } from 'react';
import { 
  Search, 
  Download, 
  Scissors, 
  HardDrive, 
  Calendar, 
  TrendingUp,
  ArrowDown,
  ExternalLink,
  Wrench
} from 'lucide-react';

const ToolLink = ({ name, url, color }) => (
  <a 
    href={url} 
    target="_blank" 
    rel="noopener noreferrer"
    className={`flex items-center justify-between p-2 rounded bg-white border border-${color}-200 hover:bg-${color}-50 text-${color}-700 text-xs font-medium transition-colors mb-1 group`}
  >
    <span>{name}</span>
    <ExternalLink size={12} className="opacity-50 group-hover:opacity-100" />
  </a>
);

const ProcessStep = ({ icon: Icon, title, subtitle, details, tools, color, isLast }) => {
  const [isOpen, setIsOpen] = useState(false);

  return (
    <div className="flex flex-col items-center w-full max-w-lg">
      {/* Card Principal */}
      <div 
        onClick={() => setIsOpen(!isOpen)}
        className={`relative w-full bg-white border-l-4 ${isOpen ? `border-${color}-500 shadow-lg ring-1 ring-${color}-100` : `border-${color}-400 shadow`} rounded-r-lg p-5 mb-0 transition-all cursor-pointer hover:bg-gray-50`}
      >
        <div className="flex items-center justify-between">
          <div className="flex items-center gap-4">
            <div className={`p-2 rounded-lg bg-${color}-100 text-${color}-600`}>
              <Icon size={24} />
            </div>
            <div>
              <h3 className="font-bold text-gray-800 text-lg">{title}</h3>
              <p className="text-xs font-semibold text-gray-500 uppercase tracking-wide">{subtitle}</p>
            </div>
          </div>
          <div className={`text-${color}-500 transform transition-transform ${isOpen ? 'rotate-180' : ''}`}>
            <ArrowDown size={20} />
          </div>
        </div>

        {/* Área Expansível */}
        {isOpen && (
          <div className="mt-4 pt-4 border-t border-gray-100 animate-fadeIn">
            
            {/* Lista de Tarefas */}
            <div className="mb-4">
              <h4 className="text-xs font-bold text-gray-400 uppercase mb-2">O que fazer:</h4>
              <ul className="space-y-1 text-sm text-gray-700">
                {details.map((item, idx) => (
                  <li key={idx} className="flex items-start gap-2">
                    <span className={`mt-1.5 w-1.5 h-1.5 rounded-full bg-${color}-400 flex-shrink-0`}></span>
                    <span>{item}</span>
                  </li>
                ))}
              </ul>
            </div>

            {/* Links de Ferramentas */}
            {tools && (
              <div className={`bg-${color}-50 p-3 rounded-lg border border-${color}-100`}>
                <div className="flex items-center gap-2 mb-2 text-gray-700">
                  <Wrench size={14} />
                  <span className="text-xs font-bold uppercase">Ferramentas (Clique para abrir):</span>
                </div>
                <div className="grid grid-cols-2 gap-2">
                  {tools.map((tool, idx) => (
                    <ToolLink key={idx} {...tool} color={color} />
                  ))}
                </div>
              </div>
            )}
          </div>
        )}
      </div>

      {/* Linha Conectora */}
      {!isLast && (
        <div className="h-8 w-0.5 bg-gray-300 my-1"></div>
      )}
    </div>
  );
};

const ViralDashboard = () => {
  const steps = [
    {
      icon: Search,
      title: "1. Mineração de Tendências",
      subtitle: "Encontrar vídeos virais",
      color: "yellow",
      details: [
        "Acesse o Creative Center do TikTok para ver o que está em alta.",
        "Use o Google Trends para validar assuntos.",
        "Busque vídeos com muitas views e comentários recentes."
      ],
      tools: [
        { name: "TikTok Creative Center", url: "https://ads.tiktok.com/business/creativecenter/inspiration/topads/pc/en" },
        { name: "Google Trends", url: "https://trends.google.com.br/" },
        { name: "Explorar Instagram", url: "https://www.instagram.com/explore/" }
      ]
    },
    {
      icon: Download,
      title: "2. Extração Limpa (Download)",
      subtitle: "Baixar sem marca d'água",
      color: "blue",
      details: [
        "Copie o link do vídeo original.",
        "Cole em uma das ferramentas abaixo.",
        "Baixe sempre em HD."
      ],
      tools: [
        { name: "SnapTik (TikTok)", url: "https://snaptik.app/" },
        { name: "SnapInsta (Reels)", url: "https://snapinsta.app/" },
        { name: "SaveTube (Shorts)", url: "https://savetube.me/" },
        { name: "SSSTik (Reserva TikTok)", url: "https://ssstik.io/" }
      ]
    },
    {
      icon: Scissors,
      title: "3. Edição & Limpeza (IA)",
      subtitle: "Remover objetos e editar",
      color: "purple",
      details: [
        "Remova emojis/textos fixos com IA se necessário.",
        "Edite o vídeo, adicione legendas e música.",
        "Use o CapCut para cortes rápidos."
      ],
      tools: [
        { name: "AniEraser (Apagar Objetos)", url: "https://ani-eraser.media.io/" },
        { name: "CapCut Online", url: "https://www.capcut.com/editor" },
        { name: "Remove Logo (123Apps)", url: "https://online-video-cutter.com/remove-logo" },
        { name: "Magic Eraser", url: "https://magicstudio.com/magiceraser/" }
      ]
    },
    {
      icon: HardDrive,
      title: "4. Organização (Drive)",
      subtitle: "Estoque de conteúdo",
      color: "green",
      details: [
        "Salve o arquivo editado na pasta correta.",
        "Nomeie com a data de postagem (ex: 2024-05-20_Tema.mp4).",
        "Mantenha backup dos originais."
      ],
      tools: [
        { name: "Google Drive", url: "https://drive.google.com/" },
        { name: "Dropbox (Alternativa)", url: "https://www.dropbox.com/" }
      ]
    },
    {
      icon: Calendar,
      title: "5. Publicação e Agendamento",
      subtitle: "Distribuição nas redes",
      color: "red",
      details: [
        "Agende os posts para a semana toda.",
        "Use o Meta Suite para Face/Insta.",
        "Use o TikTok Upload para PC."
      ],
      tools: [
        { name: "Meta Business Suite", url: "https://business.facebook.com/" },
        { name: "TikTok Upload PC", url: "https://www.tiktok.com/upload" },
        { name: "YouTube Studio", url: "https://studio.youtube.com/" }
      ]
    }
  ];

  return (
    <div className="min-h-screen bg-slate-50 p-4 md:p-8 flex flex-col items-center font-sans">
      <div className="max-w-2xl w-full text-center mb-8">
        <div className="inline-block p-3 bg-white rounded-full shadow-sm border border-gray-100 mb-4">
          <TrendingUp className="text-indigo-600 inline-block mr-2" size={24} />
          <span className="font-bold text-gray-800 text-lg">Central de Comando: Dark Content</span>
        </div>
        <p className="text-gray-600 max-w-md mx-auto">
          Painel interativo com todas as ferramentas de IA e download. 
          <span className="block font-semibold text-indigo-600 mt-1">Toque nos passos para abrir os links.</span>
        </p>
      </div>

      <div className="flex flex-col items-center w-full">
        {steps.map((step, index) => (
          <ProcessStep 
            key={index} 
            {...step} 
            isLast={index === steps.length - 1} 
          />
        ))}
      </div>
      
      <div className="mt-8 text-center text-xs text-gray-400">
        <p>Favoritar esta página para acesso rápido.</p>
      </div>
    </div>
  );
};

export default ViralDashboard;

